clear allclcload('allSamples');trainingdata_0 = allSamples.goodSamples;trainingdata_1 = allSamples.badSamples;trainingdata_2 = allSamples.testSamples;formatIn = 'yyyy-mm-dd HH:MM:SS';index = 1;for i=1:length(trainingdata_0)    trainingdata_0(i).label = 0;    data = [];    time = datevec(trainingdata_0(i).Time,formatIn);    data = [time (trainingdata_0(i).data)'];    monthSets = sort(unique(time(:,2)));    for j=1:length(monthSets)        data0 = [];        data_0 = bsxfun(@times,data,data(:,2)==monthSets(j));        data_0(find(data_0(:,1)==0),:) = [];        trainingData(index,1) = trainingdata_0(i).AMIModel;        trainingData(index,2) = trainingdata_0(i).Loc;        data_1 = data_0(find(data_0(:,4)<=2),:);        trainingData(index,3) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,9) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=6 & data_0(:,4)>3),:);        trainingData(index,4) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,10) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=12 & data_0(:,4)>6),:);        trainingData(index,5) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,11) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=16 & data_0(:,4)>12),:);        trainingData(index,6) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,12) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=20 & data_0(:,4)>16),:);        trainingData(index,7) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,13) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)>20),:);        trainingData(index,8) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,14) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        trainingData(index,15) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),2)))};        trainingData(index,16) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),4)))};        trainingData(index,17) = {trainingdata_0(i).label};        index = index + 1;    endendfor i=1:length(trainingdata_1)    trainingdata_1(i).label = 1;    data = [];    time = datevec(trainingdata_1(i).Time,formatIn);    data = [time (trainingdata_1(i).data)'];    monthSets = sort(unique(time(:,2)));    for j=1:length(monthSets)        data0 = [];        data_0 = bsxfun(@times,data,data(:,2)==monthSets(j));        data_0(find(data_0(:,1)==0),:) = [];        trainingData(index,1) = trainingdata_1(i).AMIModel;        trainingData(index,2) = trainingdata_1(i).Loc;        data_1 = data_0(find(data_0(:,4)<=2),:);        trainingData(index,3) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,9) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=6 & data_0(:,4)>3),:);        trainingData(index,4) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,10) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=12 & data_0(:,4)>6),:);        trainingData(index,5) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,11) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=16 & data_0(:,4)>12),:);        trainingData(index,6) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,12) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=20 & data_0(:,4)>16),:);        trainingData(index,7) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,13) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)>20),:);        trainingData(index,8) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,14) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        trainingData(index,15) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),2)))};        trainingData(index,16) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),4)))};        trainingData(index,17) = {trainingdata_1(i).label};        index = index + 1;    endendfor i=1:length(trainingdata_2)    data = [];    time = datevec(trainingdata_2(i).Time,formatIn);    data = [time (trainingdata_2(i).data)'];    monthSets = sort(unique(time(:,2)));    for j=1:length(monthSets)        data0 = [];        data_0 = bsxfun(@times,data,data(:,2)==monthSets(j));        data_0(find(data_0(:,1)==0),:) = [];        trainingData(index,1) = trainingdata_2(i).AMIModel;        trainingData(index,2) = trainingdata_2(i).Loc;        data_1 = data_0(find(data_0(:,4)<=2),:);        trainingData(index,3) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,9) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=6 & data_0(:,4)>3),:);        trainingData(index,4) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,10) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=12 & data_0(:,4)>6),:);        trainingData(index,5) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,11) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=16 & data_0(:,4)>12),:);        trainingData(index,6) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,12) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)<=20 & data_0(:,4)>16),:);        trainingData(index,7) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,13) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        data_1 = data_0(find(data_0(:,4)>20),:);        trainingData(index,8) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),7))};        trainingData(index,14) = {max(data_1(find(data_1(:,7)==max(data_1(:,7))),8))};        trainingData(index,15) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),2)))};        trainingData(index,16) = {max(max(data_1(find(data_1(:,7)==max(data_1(:,7))),4)))};        trainingData(index, 17) = {trainingdata_2(i).status};        index = index + 1;    endendxlswrite('trainingData.xlsx', trainingData, 'Sheet1');        